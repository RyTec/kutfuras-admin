{% extends "base.html" %}

{% block title %}Új árajánlat{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-6">
  <h1 class="text-2xl font-bold mb-4">Új árajánlat létrehozása</h1>

  <form action="{{ url_for('create_quote') }}" method="POST" class="bg-white p-6 rounded-lg shadow-md">
    <h2 class="text-xl font-semibold mb-4">Cég adatai</h2>

    <div class="mb-4">
      <label class="block text-gray-700 font-semibold">Cég neve</label>
      <input type="text" name="company_name" class="w-full p-2 border border-gray-300 rounded" required>
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 font-semibold">Adószám</label>
      <input type="text" name="tax_number" class="w-full p-2 border border-gray-300 rounded">
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 font-semibold">Kapcsolattartó neve</label>
      <input type="text" name="contact_name" class="w-full p-2 border border-gray-300 rounded">
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 font-semibold">Email</label>
      <input type="email" name="contact_email" class="w-full p-2 border border-gray-300 rounded">
    </div>

    <div class="mb-4">
      <label class="block text-gray-700 font-semibold">Telefonszám</label>
      <input type="text" name="contact_phone" class="w-full p-2 border border-gray-300 rounded">
    </div>

    <h2 class="text-xl font-semibold mt-6 mb-4">Tételek hozzáadása</h2>

    <div id="items-container">
      <div class="flex space-x-4 mb-4 item-row">
        <input type="text" name="item_name[]" placeholder="Megnevezés" class="w-1/3 p-2 border border-gray-300 rounded">
        <input type="number" name="item_quantity[]" placeholder="Mennyiség" class="w-1/6 p-2 border border-gray-300 rounded">
        <input type="text" name="item_unit[]" placeholder="Egység" class="w-1/6 p-2 border border-gray-300 rounded">
        <input type="number" name="item_unit_price[]" placeholder="Egységár" class="w-1/6 p-2 border border-gray-300 rounded">
        <button type="button" onclick="removeItem(this)" class="text-red-500 font-semibold">✖</button>
      </div>
    </div>

    <button type="button" onclick="addItem()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 mb-4">
      + Tétel hozzáadása
    </button>

    <div class="mt-6">
      <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">Mentés</button>
      <a href="{{ url_for('quotes') }}" class="ml-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">Mégse</a>
    </div>
  </form>
</div>

<script>
function addItem() {
  const container = document.getElementById('items-container');
  const itemRow = document.createElement('div');
  itemRow.className = 'flex space-x-4 mb-4 item-row';
  itemRow.innerHTML = `
    <input type="text" name="item_name[]" placeholder="Megnevezés" class="w-1/3 p-2 border border-gray-300 rounded">
    <input type="number" name="item_quantity[]" placeholder="Mennyiség" class="w-1/6 p-2 border border-gray-300 rounded">
    <input type="text" name="item_unit[]" placeholder="Egység" class="w-1/6 p-2 border border-gray-300 rounded">
    <input type="number" name="item_unit_price[]" placeholder="Egységár" class="w-1/6 p-2 border border-gray-300 rounded">
    <button type="button" onclick="removeItem(this)" class="text-red-500 font-semibold">✖</button>
  `;
  container.appendChild(itemRow);
}

function removeItem(button) {
  button.parentElement.remove();
}
</script>
{% endblock %}
